<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="sale.sale_order_portal_content" name="Contract Preview">
        <div class="contractPrintBody">
            <div id="cover_page" class="">
                <div class="printLinesTop only-print">
                    <div id="gold-line"></div>
                    <div id="blue-line"></div>
                    <div id="red-line"></div>
                </div>

                <div class="middle_section">
                    <div>
                        <img id="cover_page_logo" class="mb-6 col-12" src="/clx_retail_pricelist/static/img/cl_horizontal-NEW.png" alt="Conversion Logix Logo"/>
                    </div>
                    <h1 class="contract-title"><address t-field="sale_order.partner_invoice_id" t-options='{"widget": "contact", "fields": ["name"], "no_marker": True}'/></h1>
                </div>
                <div id="dedicated_account_rep_info" class="col-12">
                    <div class="salesRepInfoWrapper row" >
                        <div class="col-10 offset-3">Dedicated Account Representative Information:</div>
                        <div class="col-10 offset-4">Name: <stong t-esc="sale_order.user_id.name"/></div>
                        <div class="col-10 offset-4">Email: <stong t-esc="sale_order.user_id.email"/></div>
                        <div class="col-10 offset-4">Phone: <stong t-esc="sale_order.user_id.phone"/></div>
                    </div>
                </div>
                <div class="printFooterFirstPage">
                    <span>conversionlogix.com</span><span style="padding:0px 50px 0px 50px;">|</span><span style="font-style:italic;">17921 Bothell Everett Hwy. #105 // Bothell, WA 98012</span>
                </div>
                <div class="printObscureFirstPage">
                </div>            
            </div>
        </div>

        <div class="container">
            <div class="pseudoPage">
                <div class="communityLogoWrapper row">
                    <img class="col-6 offset-3" t-if="sale_order.user_id.image_1024" t-att-src="image_data_uri(sale_order.user_id.image_1024)" alt="Contact"/>
                    <img class="col-6 offset-3" t-if="not sale_order.user_id.image_1024" src="/web/static/src/img/placeholder.png" alt="Contact"/>
                </div>
                <div class="communityName row justify-content-md-center">
                    <h2><span t-esc="sale_order.partner_invoice_id.name"/> - Proposal of Services</h2>
                </div>
                <div class="contractedServicesWrapper">
                        <t t-set="first_month_subtotal" t-value="0.0"/>
                        <t t-set="fee_subtotal" t-value="0.0"/>
                        <t t-set="current_subtotal" t-value="0.0"/>
                        <t t-foreach="sale_order.order_line" t-as="line">

    <!-- section just for compatibly with original ones --> 
    <section id="details" style="page-break-inside: auto;display:none;" class="mt32">
        <t t-set="display_discount" t-value="True in [line.discount > 0 for line in sale_order.order_line]"/>
        <table class="table table-sm" id="sales_order_table">
        <thead>
        <tr>
        </tr>
        </thead>
        </table>
        <section t-if="sale_order.signature" id="signature" name="Signature"/>
        <div id="quote_qty"/>
        <div class="row" id="so_date"/>
        <div id="informations"/>
    </section>

                            <t t-if="line.product_id.categ_id.name=='Fees'">
                                <span t-set="fee_subtotal" t-value="fee_subtotal+line.price_unit"/>
                            </t>
                            <t t-else="">
                            <div class="productLineWrapper row">
                                <div class="topbar row valign-wrapper col-12">
                                    <section id="details" class="productTitle col-4">
                                        <tr t-att-class="'bg-200 font-weight-bold o_line_section' if line.display_type == 'line_section' else 'font-italic o_line_note' if line.display_type == 'line_note' else ''">
                                            <t t-if="not line.display_type">
                                                <td id="product_name"><span t-field="line.name"/></td>
                                            </t>
                                            <t t-if="line.display_type == 'line_section'">
                                                <td colspan="99">
                                                    <span t-field="line.name"/>
                                                </td>
                                                <t t-set="current_section" t-value="line"/>
                                                <t t-set="current_subtotal" t-value="0"/>
                                            </t>
                                            <t t-if="line.display_type == 'line_note'">
                                                <td colspan="99">
                                                    <span t-field="line.name"/>
                                                </td>
                                            </t>
                                            <div class="descriptionWrapper">
                                                <div class="description col-11 offset-4">
                                                    <td id="product_name"><span t-esc="line.product_id.contract_product_description"/></td>
                                                </div>
                                            </div>                                            
                                        </tr>
                                    </section>
                                    <div class="productTotalWrapperWrapper col-8">
                                        <div class="productTotalWrapper">
                                            <div class="monthlyTotalText">Monthly Total: </div><div class="productTotal"><span t-esc="line.price_unit"/></div>
                                        </div>
                                        <div t-if="line.prorate_amount" class="productTotalWrapper">
                                            <div style="display:inline-block;">First Month Total: </div><div class="productTotal"><span t-esc="line.prorate_amount"/></div>
                                        </div>
                                        <t t-set="management_fee_calculated" t-value="sale_order.management_fee_calculation(line.price_unit,line.product_template_id,sale_order.pricelist_id)" />
                                        <div t-if="management_fee_calculated" class="productTotalWrapper" >
                                            <div style="display:inline-block;">Monthly Fee: </div><div class="productTotal"><span t-esc="management_fee_calculated"/></div>
                                        </div>
                                        <t t-set="first_month_subtotal" t-value="first_month_subtotal + (line.prorate_amount if line.prorate_amount else line.price_unit)"/>
                                        <t t-set="current_subtotal" t-value="current_subtotal + line.price_unit"/>
                                    </div>
                                </div>
                            </div>
                            </t>
                        </t>

                        <t t-if="current_section and (line_last or sale_order.order_line[line_index+1].display_type == 'line_section')">
                            <tr class="is-subtotal text-right">
                                <td colspan="99">
                                    <strong class="mr16">Subtotal</strong>
                                    <span
                                        t-esc="current_subtotal"
                                        t-options='{"widget": "monetary", "display_currency": sale_order.pricelist_id.currency_id}'
                                    />
                                </td>
                            </tr>
                        </t>
                </div>
            </div>
        </div>
                <div class="monthlyTotalWrappersWrapper dont_break_inside row">
                    <div class="offset-1 col-4 firstMonthlyTotalWrapperWrapper">
                        <div class="firstMonthlyTotalWrapper">
                            <div class="">First Month Spend: </div>
                            <div class="monthlyTotal">$ <span t-esc="first_month_subtotal"/></div>
                        </div>
                    </div>
                    <div class="offset-2 col-4 monthlyTotalWrapper">
                        <div class="">Recurring Monthly Spend: </div>
                        <div class="monthlyTotal">$ <span t-esc="current_subtotal"/></div>
                    </div>
                </div>
                <div class="col-8 offset-2">
                    <div class="section_wrapper_subtle">
                        <h2 class="full center">Key Information</h2>
                        <div class="keyValueRow row">
                            <div class="col-5 leftKey">Community Name:</div>
                            <span class="col-7" t-esc="sale_order.partner_invoice_id.name"/>
                        </div>
                        <div class="keyValueRow row">
                            <div class="col-5 leftKey">Community Address:</div>
                            <span class="col-7" t-esc="', '.join([str(sale_order.partner_invoice_id.street)+str(sale_order.partner_invoice_id.street2 if sale_order.partner_invoice_id.street2 else ''),str(sale_order.partner_invoice_id.city),str(sale_order.partner_invoice_id.state_id.name),str(sale_order.partner_invoice_id.zip),str(sale_order.partner_invoice_id.country_id.name)])"/>
                        </div>
                        <div class="keyValueRow row">
                            <div class="col-5 leftKey">Website:</div>
                            <span class="col-7" t-esc="sale_order.partner_invoice_id.website"/>
                        </div>
                        <!-- REPLACEME - Ownership??? -->
                    </div>
                </div>
                <div class="dont_break_inside clear_shadow col-8 offset-2">
                    <div class="section_wrapper_subtle">
                        <h2 class="full center">Length and Fees</h2>
                        <!-- Contract Length -->
                        <div class="keyValueRow row">
                            <div class="col-4">Contract Length:</div>
                            <div class="col-6 offset-1 ">
                                <span t-esc="sale_order.contract_length"/>
                            </div>
                        </div>
                        <div class="keyValueRow row">
                            <div class="col-4">Intended Launch Date:</div>
                            <div class="col-6 offset-1 ">
                                <span t-esc="sale_order.contract_start_date"/>
                            </div>
                        </div>
                        <!-- Setup Fee -->
                        <div class="keyValueRow row">
                            <div class="col-5">Setup Fee:</div>
                            <div class="col-6 offset-1">
                                $<span t-esc="fee_subtotal"/>
                            </div>
                        </div>
                        <!-- Ad Change Fees -->
                        </div>
                </div>

                <div class="dont_break_inside clear_shadow col-8 offset-2" >
                    <div class="payment_details section_wrapper_subtle">
                        <h2 class="full center">Payment Details</h2>
                            <div class="keyValueRow row">
                            <div class="col-5">Payment Method:</div><div class="col-6 offset-1">Direct Bill</div>
                        </div>
                    </div>
                </div>

        <t t-set="greystar_flag" t-value="sale_order.partner_invoice_id.management_company_type_id.name.find('Greystar')"/>
        <t t-if="greystar_flag">
            <t t-call="clx_retail_pricelist.sale_order_portal_content_nongs_mba"/>
            <div class="dont_break_inside clear_shadow col-10 offset-1">
                <div class="termsOfServiceWrapper section_wrapper_subtle row">
                    <div class="termsOfServices col-12">
                        <h2 class="full center">Terms of Service:</h2>
                        <p>Fees based upon minimum guaranteed 6 months – 6 month initial commitment from date of launch. Agreement will renew annually for additional 6 months unless otherwise noted. Advertiser or Provider may cancel this agreement by providing 30 day written notice (including notice through email) at the time that initial contracted term is fulfilled. All elements of the campaign must be pre-paid in full each month for the campaign to run. If payment lapses, the campaign will be paused until payment is received. Prices include creative (two rounds of initial design, changes as needed (ads should run for at least 30 days without changes), campaign management and monthly reports. Branded Search Targeting packages include both desktop and mobile investments. Search management fee is $400 or 20%, whichever is greater. Targeted Online Display CPM is $12, with premium placement, $18</p>                        
                    </div>
                </div>
            </div>            
        </t>
        <t t-else="">
            <div class="dont_break_inside clear_shadow col-10 offset-1">
                <div class="termsOfServiceWrapper section_wrapper_subtle row">
                    <div class="termsOfServices col-12">
                        <h2 class="full center">Terms of Service:</h2>
                        <p>Standard Length of Agreement is as selected above. After initial commitment, agreement becomes month to month. Advertiser may cancel this Order and Agreement upon 30 day written notice including notice via email. If cancelled prior to the agreement length, a retroactive setup fee of $250 may be charged. Should Advertiser exercise this right, Advertiser’s liability for further delivery of traffic shall be limited to only that traffic delivered during the 30-day notice period. Launch dates from the 1st-15th will be billed at a full month. Launch dates from the 15th-end of month will be billed a half month. CallChatter invoices are not prorated. Total monthly cost is inclusive of the management fee as defined in the National Preferred Vendor Agreement between Greystar and Conversion Logix.</p><p>Paid Search - $1800 per Month beginning April 2021 GTC<br/>Display Retargeting - $400 per month beginning April 2021 GTC<br/><br/>$2,200 monthly Total</p>                        
                    </div>
                </div>
            </div>
        </t>
        <t t-if="report_type != 'html'">
            <div class="col-12 dont_break_inside" style="margin-top: 20px;border: 6px double #BE2329;border-radius: 27px;">
                <div class="signing_section section_wrapper row" style="margin-bottom:0px;">
                    <h2 class="col-12 full center">Signatures</h2>
                    
                    <div class="col-12 subsection">
                        <div class="subsection_header">Client</div>
                        <div class="row">
                            <div class="col-4">Client/Agent Signature</div>
                            <div class="col-5" style="padding:0px 10px;"><div style="border-bottom:2px solid black;display: inline-block;width: 100%;"></div></div>
                            <div class="col-1">Date</div>
                            <div class="col-2 center" style="padding:0px 10px;"><div style="border-bottom:2px solid black;display: inline-block;width: 100%;"></div></div>
                        </div>
                        <div class="row">
                            <div class="col-4">Name</div>
                            <div class="col-5" style="padding:0px 10px;"><div style="border-bottom:2px solid black;display: inline-block;width: 100%;"></div></div>
                            <div class="col-1">Title</div>
                            <div class="col-2" style="padding:0px 10px;"><div style="border-bottom:2px solid black;display: inline-block;width: 100%;"></div></div>
                        </div>
                        <div class="row">
                            <div class="col-4">By:</div>
                            <div class="col-5" style="padding:0px 10px;"><div style="border-bottom:2px solid black;display: inline-block;width: 100%;">Other</div></div>
                        </div>
                    </div>
                    <div class="col-12 subsection">
                        <div class="subsection_header">Conversion Logix</div>
                        <div class="row">
                            <div class="col-4">Conversion Logix:</div>
                            <div class="col-5" style="padding:0px 10px;"><div style="border-bottom:2px solid black;display: inline-block;width: 100%;"></div></div>
                            <div class="col-1">Date</div>
                            <div class="col-2 center" style="padding:0px 10px;"><div style="border-bottom:2px solid black;display: inline-block;width: 100%;"></div></div>
                        </div>
                    </div>
                </div>
            </div>
        </t>

    </template>

<!-- TEMPLATE FOR HTML CONTRACT -->
    <template id="sale.sale_order_portal_template" name="Sales Order Portal Template" inherit_id="portal.portal_sidebar" primary="True">
        <xpath expr="//div[hasclass('o_portal_sidebar')]" position="inside">
            <t t-set="o_portal_fullwidth_alert" groups="sales_team.group_sale_salesman">
                <t t-call="portal.portal_back_in_edit_mode">
                    <t t-set="backend_url" t-value="'/web#model=%s&amp;id=%s&amp;action=%s&amp;view_type=form' % (sale_order._name, sale_order.id, action.id)"/>
                </t>
            </t>

            <div class="row mt16 o_portal_sale_sidebar">
                <!-- Sidebar -->
                <t t-call="portal.portal_record_sidebar">
                    <t t-set="classes" t-value="'col-lg-auto d-print-none'"/>

                    <t t-set="title">
                        <h2 class="mb-0"><b t-field="sale_order.amount_total" data-id="total_amount"/> </h2>
                    </t>
                    <t t-set="entries">
                        <ul class="list-group list-group-flush flex-wrap flex-row flex-lg-column">
                            <li class="list-group-item flex-grow-1">
                                <a t-if="sale_order.has_to_be_signed(True)" role="button" class="btn btn-primary btn-block mb8" data-toggle="modal" data-target="#modalaccept" href="#">
                                    <i class="fa fa-check"/><t t-if="sale_order.has_to_be_paid(True)"> Sign &amp; Pay</t><t t-else=""> Accept &amp; Sign</t>
                                </a>
                                <a t-elif="sale_order.has_to_be_paid(True)" role="button" id="o_sale_portal_paynow" data-toggle="modal" data-target="#modalaccept" href="#" t-att-class="'btn-block mb8 %s' % ('btn btn-light' if sale_order.transaction_ids else 'btn btn-primary')" >
                                    <i class="fa fa-check"/> <t t-if="not sale_order.signature">Accept &amp; Pay</t><t t-else="">Pay Now</t>
                                </a>
                                <div class="o_download_pdf btn-toolbar flex-sm-nowrap">
                                    <div class="btn-group flex-grow-1 mr-1 mb-1">
                                        <a class="btn btn-secondary btn-block o_download_btn" t-att-href="sale_order.get_portal_url(report_type='pdf', download=True)" title="Download"><i class="fa fa-download"/> Download</a>
                                    </div>
                                    <div class="btn-group flex-grow-1 mb-1">
                                        <a class="btn btn-secondary btn-block o_print_btn o_portal_invoice_print" t-att-href="sale_order.get_portal_url(report_type='pdf')" id="print_invoice_report" title="Print" target="_blank"><i class="fa fa-print"/> Print</a>
                                    </div>
                                </div>
                            </li>

                            <li class="navspy list-group-item pl-0 flex-grow-1" t-ignore="true" role="complementary">
                                <ul class="nav flex-column bs-sidenav"></ul>
                            </li>

                            <t t-if="not sale_order.is_expired and sale_order.state in ['draft', 'sent']">
                                <li t-if="sale_order.remaining_validity_days &gt; 0" class="list-group-item">
                                    <small><b class="text-muted">This offer expires in</b></small>
                                    <div class="day_counter">
                                        <i class="fa fa-clock-o" aria-label="Dates" title="Dates"></i>
                                        <t t-esc="sale_order.remaining_validity_days"/>
                                        <t t-if="sale_order.remaining_validity_days &gt; 1">days</t><t t-else="">day</t>
                                    </div>
                                </li>
                                <li t-if="sale_order.amount_undiscounted - sale_order.amount_untaxed &gt; 0.01" class="list-group-item flex-grow-1">
                                    <small><b class="text-muted">Your advantage</b></small>
                                    <small>
                                        <b t-field="sale_order.amount_undiscounted"
                                            t-options='{"widget": "monetary", "display_currency": sale_order.pricelist_id.currency_id}'
                                            style="text-decoration: line-through"
                                            class="d-block mt-1"
                                            data-id="amount_undiscounted" />
                                    </small>
                                    <t t-if="sale_order.amount_untaxed == sale_order.amount_total">
                                        <h4 t-field="sale_order.amount_total" class="text-success" data-id="total_amount"/>
                                    </t>
                                    <t t-else="">
                                        <h4 t-field="sale_order.amount_untaxed" class="text-success mb-0" data-id="total_untaxed"/>
                                        <small>(<span t-field="sale_order.amount_total" data-id="total_amount"/> Incl. tax)</small>
                                    </t>
                                </li>
                            </t>

                            <li t-if="sale_order.user_id" class="list-group-item flex-grow-1">
                                <div class="small mb-1"><strong class="text-muted">Salesperson</strong></div>
                                <div class="row flex-nowrap">
                                    <div class="col flex-grow-0 pr-2">
                                        <img class="rounded-circle mr4 float-left o_portal_contact_img" t-if="sale_order.user_id.image_1024" t-att-src="image_data_uri(sale_order.user_id.image_1024)" alt="Contact"/>
                                        <img class="rounded-circle mr4 float-left o_portal_contact_img" t-if="not sale_order.user_id.image_1024" src="/web/static/src/img/placeholder.png" alt="Contact"/>
                                    </div>
                                    <div class="col pl-0" style="min-width: 150px">
                                        <span t-field="sale_order.user_id" t-options='{"widget": "contact", "fields": ["name", "phone"], "no_marker": True}'/>
                                        <a href="#discussion" class="small"><i class="fa fa-comment"></i> Send message</a>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </t>
                </t>

                <!-- Page content -->
                <div id="quote_content" class="col-12 col-lg justify-content-end">

                    <!-- modal relative to the actions sign and pay -->
                    <div role="dialog" class="modal fade" id="modalaccept">
                        <div class="modal-dialog" t-if="sale_order.has_to_be_signed(True)">
                            <form id="accept" method="POST" t-att-data-order-id="sale_order.id" t-att-data-token="sale_order.access_token" class="js_accept_json modal-content js_website_submit_form">
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                <header class="modal-header">
                                    <h4 class="modal-title">Validate Order</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">&amp;times;</button>
                                </header>
                                <main class="modal-body" id="sign-dialog">
                                    <p>
                                        <span>By signing this proposal, I agree to the following terms:</span>
                                        <ul>
                                            <li><span>Accepted on the behalf of:</span> <b t-field="sale_order.partner_id.commercial_partner_id"/></li>
                                            <li><span>For an amount of:</span> <b data-id="total_amount" t-field="sale_order.amount_total"/></li>
                                            <li t-if="sale_order.payment_term_id"><span>With payment terms:</span> <b t-field="sale_order.payment_term_id.note"/></li>
                                        </ul>
                                    </p>
                                    <t t-call="portal.signature_form">
                                        <t t-set="call_url" t-value="sale_order.get_portal_url(suffix='/accept')"/>
                                        <t t-set="default_name" t-value="sale_order.partner_id.name"/>
                                    </t>
                                </main>
                            </form>
                        </div>

                        <div class="modal-dialog" t-if="not sale_order.has_to_be_signed(True) and sale_order.has_to_be_paid(True)">
                            <div class="modal-content">
                                <header class="modal-header">
                                    <h4 class="modal-title">Validate Order</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">&amp;times;</button>
                                </header>
                                <main class="modal-body" id="sign-dialog">
                                    <p>
                                        <span>By paying this proposal, I agree to the following terms:</span>
                                        <ul>
                                            <li><span>Accepted on the behalf of:</span> <b t-field="sale_order.partner_id.commercial_partner_id"/></li>
                                            <li><span>For an amount of:</span> <b data-id="total_amount" t-field="sale_order.amount_total"/></li>
                                            <li t-if="sale_order.payment_term_id"><span>With payment terms:</span> <b t-field="sale_order.payment_term_id.note"/></li>
                                        </ul>
                                    </p>
                                    <div t-if="pms or acquirers" id="payment_method" class="text-left">
                                        <h3 class="mb24">Pay with</h3>
                                        <t t-call="payment.payment_tokens_list">
                                            <t t-set="mode" t-value="'payment'"/>
                                            <t t-set="submit_txt">Pay &amp; Confirm</t>
                                            <t t-set="icon_class" t-value="'fa-lock'"/>
                                            <t t-set="form_action" t-value="sale_order.get_portal_url(suffix='/transaction/token')"/>
                                            <t t-set="prepare_tx_url" t-value="sale_order.get_portal_url(suffix='/transaction/')"/>
                                            <t t-set="access_token" t-value="sale_order.access_token"/>
                                        </t>
                                    </div>
                                </main>
                            </div>
                        </div>
                    </div>

                    <!-- modal relative to the action reject -->
                    <div role="dialog" class="modal fade" id="modaldecline">
                        <div class="modal-dialog">
                            <form id="decline" method="POST" t-attf-action="/my/orders/#{sale_order.id}/decline?access_token=#{sale_order.access_token}" class="modal-content">
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                <header class="modal-header">
                                    <h4 class="modal-title">Reject This Quotation</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">&amp;times;</button>
                                </header>
                                <main class="modal-body">
                                    <p>
                                        Tell us why you are refusing this quotation, this will help us improve our services.
                                    </p>
                                    <textarea rows="4" name="decline_message" required="" placeholder="Your feedback..." class="form-control" />
                                </main>
                                <footer class="modal-footer">
                                    <button type="submit" t-att-id="sale_order.id" class="btn btn-danger"><i class="fa fa-times"></i> Reject</button>
                                    <button type="button" class="btn btn-primary" data-dismiss="modal">Cancel</button>
                                </footer>
                            </form>
                        </div>
                    </div>

                    <!-- status messages -->
                    <div t-if="message == 'sign_ok'" class="alert alert-success alert-dismissable d-print-none" role="status">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">&amp;times;</button>
                        <strong>Thank You!</strong><br/>
                        <t t-if="message == 'sign_ok' and sale_order.state in ['sale', 'done']">Your order has been confirmed.</t>
                        <t t-elif="message == 'sign_ok' and sale_order.has_to_be_paid()">Your order has been signed but still needs to be paid to be confirmed.</t>
                        <t t-else="">Your order has been signed.</t>
                    </div>

                    <div t-if="message == 'cant_reject' and sale_order.has_to_be_signed()" class="alert alert-danger alert-dismissable d-print-none" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">&amp;times;</button>
                        Your order is not in a state to be rejected.
                    </div>

                    <t t-if="sale_order.transaction_ids">
                        <t t-call="payment.payment_confirmation_status">
                            <t t-set="payment_tx_id" t-value="sale_order.get_portal_last_transaction()"/>
                            <t t-set="reference" t-value="sale_order.reference"/>
                        </t>
                    </t>

                    <div t-if="sale_order.state == 'cancel'" class="alert alert-danger alert-dismissable d-print-none" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="close">&amp;times;</button>
                        <strong>This quotation has been canceled.</strong> <a role="button" href="#discussion"><i class="fa fa-comment"/> Contact us to get a new quotation.</a>
                    </div>

                    <div t-if="sale_order.is_expired" class="alert alert-warning alert-dismissable d-print-none" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="close">&amp;times;</button>
                        <strong>This offer expired!</strong> <a role="button" href="#discussion"><i class="fa fa-comment"/> Contact us to get a new quotation.</a>
                    </div>

                    <!-- main content -->
                    <div t-attf-class="card #{'pb-5' if report_type == 'html' else ''}">
                        <div t-call="sale.sale_order_portal_content"/>
                    </div>

                    <!-- bottom actions -->
                    <div t-if="sale_order.has_to_be_signed(True) or sale_order.has_to_be_paid(True)" class="row justify-content-center text-center d-print-none pt-1 pb-4">

                        <t t-if="sale_order.has_to_be_signed(True)">
                            <div class="col-sm-auto mt8">
                                <a role="button" class="btn btn-primary" data-toggle="modal" data-target="#modalaccept" href="#"><i class="fa fa-check"/><t t-if="sale_order.has_to_be_paid(True)"> Sign &amp; Pay</t><t t-else=""> Accept &amp; Sign</t></a>
                            </div>
                            <div class="col-sm-auto mt8">
                                <a role="button" class="btn btn-secondary" href="#discussion"><i class="fa fa-comment"/> Feedback</a>
                            </div>
                            <div class="col-sm-auto mt8">
                                <a role="button" class="btn btn-danger" data-toggle="modal" data-target="#modaldecline" href="#"> <i class="fa fa-times"/> Reject</a>
                            </div>
                        </t>
                        <div t-elif="sale_order.has_to_be_paid(True)" class="col-sm-auto mt8">
                            <a role="button" data-toggle="modal" data-target="#modalaccept" href="#" t-att-class="'%s' % ('btn btn-light' if sale_order.transaction_ids else 'btn btn-primary')">
                                <i class="fa fa-check"/> <t t-if="not sale_order.signature">Accept &amp; Pay</t><t t-else="">Pay Now</t>
                            </a>
                        </div>
                    </div>

                    <!-- chatter -->
                    <div id="sale_order_communication" class="mt-4">
                        <h2>History</h2>
                        <t t-call="portal.message_thread">
                            <t t-set="object" t-value="sale_order"/>
                        </t>
                    </div>
                </div><!-- // #quote_content -->
            </div>
        </xpath>
    </template>

    <template id="sale_management.sale_order_portal_content_inherit_sale_management" name="Order Options" inherit_id="sale.sale_order_portal_content">
    <!-- just overwrite the Odoo built-in template -->
    </template>

    <template id="sale.report_saleorder">
    <!-- just overwrite the Odoo built-in template -->
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <t t-call="sale.sale_order_portal_content" t-lang="doc.partner_id.lang">
                    <t t-set="sale_order" t-value="doc"/>
                </t>
            </t>
        </t>
    </template>

    <template id="sale_order_portal_content_nongs_mba" name="Non-Graystar MBA">
        <div class="pseudoPage msa-block">
            <h2 class="full center">MASTER SERVICES AGREEMENT:</h2>
            <p>
                <b>Last Updated: [8.10.2020]</b>
                    </p>
            <p style="text-indent: 0in">By signing Conversion Logix Insertion Order(s) that references this Master Services Agreement (together, the
                Insertion Order(s) and this Master Services Agreement are the “<i><b>Agreement</b></i>”), the entity identified on said Insertion Order (“<i><b>Customer</b></i>”) and Conversion Logix, LLC (“<i><b>Provider</b></i>”) each signifies that it has read, understands, and agrees to be bound by the terms and conditions hereof.
                Provider and Customer may be referred to individually as a “<i><b>Party</b></i>” and collectively as the “<i><b>Parties</b></i>.” For good and valuable consideration, the receipt and sufficiency of which are hereby acknowledged,
                the Parties agree to these terms and conditions through their undersigned authorized representatives.</p>
            <p><b>1. DEFINITIONS. </b>
            <span>Capitalized terms used herein shall have the meanings set forth in this Section </span>1<span>.</span>
            </p>
            <p>
                <b>1.1. “<i>Aggregated Data</i>”</b> means Personal Information and usage information that is anonymized
                and aggregated with similar data and information to the extent that the original Personal Information and usage
                information is no longer attributable to any specific individual.
            </p>
            <p>
                <b>1.2. “<i>Authorized Persons</i>”</b> means Provider’s employees, contractors, agents, and
                auditors who have a need to know or otherwise access Personal Information to enable Provider to perform its
                obligations under this Agreement, and who are bound by confidentiality and other obligations sufficient to protect
                Personal Information in accordance with the terms and conditions of this Agreement.
            </p>
            <p>
                <b>1.3. “<i>Personal Information</i>”</b> means information that Customer provides or for which Customer
                provides access to Provider, or information which Provider creates or obtains on behalf of Customer, in accordance
                with this Agreement that: (i) directly or indirectly identifies an individual; or (ii) can be used to authenticate
                an individual.
            </p>

            <p>
                <b>1.4. “<i>Data Breach</i>”</b> means any act or omission that materially compromises the security,
                confidentiality, or integrity of Personal Information or the physical, technical, administrative, or organizational
                safeguards put in place by Provider, or by Customer should Provider have access to Customer’s systems, that
                relate to the protection of the security, confidentiality, or integrity of Personal Information, or (ii) receipt of
                a complaint in relation to the privacy and data security practices of Service Provider or a breach or alleged breach
                of this Agreement relating to such privacy and data security practices.
            </p>    
        </div>
    </template>
</odoo>
